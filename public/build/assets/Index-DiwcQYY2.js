import{q as p,g as f,z as q,w,b as e,c as i,d as u,o as a,F as D,e as j,t as n,i as v,j as m,u as s,A as x}from"./app-CiTMlupv.js";import{_ as E}from"./AuthenticatedLayout-Cc6b8Rs_.js";import"./logo-DeNzv_1-.js";const F={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},T={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},$={class:"p-6"},z={class:"overflow-x-auto"},A={class:"min-w-full divide-y divide-gray-200"},B={class:"bg-white divide-y divide-gray-200"},M={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},O={key:0,class:"w-16 h-12 overflow-hidden rounded"},W=["src"],P={key:1,class:"w-16 h-12 bg-gray-100 rounded flex items-center justify-center text-xs text-gray-400"},H={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},L={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},G={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},J=["onClick"],K=["onClick"],Q={key:0,class:"inset-0 z-50 flex items-center justify-center"},R={class:"bg-white rounded-lg shadow-lg z-50 max-w-2xl w-full p-6 mx-4"},Y={class:"mb-4"},Z={key:0,class:"text-red-500 text-sm mt-1"},ee={class:"mb-4"},te={key:0,class:"text-red-500 text-sm mt-1"},se={class:"mb-4"},oe={key:0,class:"text-red-500 text-sm mt-1"},re={class:"mb-4"},le={key:0,class:"text-red-500 text-sm mt-1"},de={class:"mb-4"},ae={key:0,class:"text-red-500 text-sm mt-1"},ie={class:"flex justify-end space-x-3"},ne=["disabled"],ue={key:1,class:"inset-0 z-[9999] flex items-center justify-center p-4"},me={class:"bg-white rounded-lg shadow-lg z-50 max-w-2xl w-full p-6 mx-4"},xe={class:"mb-4"},ce={key:0,class:"text-red-500 text-sm mt-1"},ge={class:"mb-4"},pe={key:0,class:"text-red-500 text-sm mt-1"},ye={class:"mb-4"},be={key:0,class:"text-red-500 text-sm mt-1"},fe={class:"mb-4"},we={key:0,class:"text-red-500 text-sm mt-1"},ve={class:"mb-4"},he={key:0,class:"text-red-500 text-sm mt-1"},ke={class:"flex justify-end space-x-3"},_e=["disabled"],Ve={__name:"Index",props:{news:Array},setup(h){const y=p(h.news??[]),c=p(!1),g=p(!1),b=p(null),l=f({title:"",excerpt:"",image:"",category:"",date:new Date().toISOString().slice(0,10)}),k=()=>{l.reset(),c.value=!0},_=()=>{l.post(route("admin.news.store"),{onFinish:()=>{c.value=!1}})},r=f({title:"",excerpt:"",image:"",category:"",date:new Date().toISOString().slice(0,10)}),C=d=>{b.value=d,r.title=d.title||"",r.excerpt=d.excerpt||"",r.image=d.image||"",r.category=d.category||"",r.date=d.date?d.date.slice(0,10):new Date().toISOString().slice(0,10),g.value=!0},N=()=>{b.value&&r.post(route("admin.news.update",b.value.id),{headers:{"X-HTTP-Method-Override":"PUT"},onFinish:()=>{g.value=!1}})},S=d=>{confirm("Are you sure you want to delete this news item?")&&axios.delete(route("admin.news.destroy",d)).then(t=>{y.value=y.value.filter(o=>o.id!==d),alert("News deleted successfully.")}).catch(t=>{console.error(t),alert("Failed to delete news.")})},U=d=>{if(!d)return null;try{if(d.startsWith("http://")||d.startsWith("https://")||d.startsWith("/"))return d}catch{}return"/storage/"+d};return(d,t)=>(a(),q(E,{title:"News"},{header:w(()=>[...t[14]||(t[14]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," News Management ",-1)])]),default:w(()=>[e("div",F,[e("div",I,[e("div",T,[e("div",$,[e("div",{class:"flex justify-between items-center mb-6"},[t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-gray-900"}," News ",-1)),e("button",{onClick:k,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Add News ")]),e("div",z,[e("table",A,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Image "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",B,[(a(!0),i(D,null,j(y.value,o=>(a(),i("tr",{key:o.id},[e("td",M,[o.image?(a(),i("div",O,[e("img",{src:U(o.image),class:"w-full h-full object-cover",alt:"news image"},null,8,W)])):(a(),i("div",P," No image "))]),e("td",H,n(o.title),1),e("td",L,n(o.category),1),e("td",X,n(o.date),1),e("td",G,[e("button",{onClick:V=>C(o),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Edit ",8,J),e("button",{onClick:V=>S(o.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,K)])]))),128))])])])])])])]),c.value?(a(),i("div",Q,[e("div",{class:"fixed inset-0 bg-black/50",onClick:t[0]||(t[0]=o=>c.value=!1)}),e("div",R,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium mb-4"},"Create News",-1)),e("form",{onSubmit:v(_,["prevent"])},[e("div",Y,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s(l).title=o),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[x,s(l).title]]),s(l).errors.title?(a(),i("div",Z,n(s(l).errors.title),1)):u("",!0)]),e("div",ee,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Excerpt",-1)),m(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>s(l).excerpt=o),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[x,s(l).excerpt]]),s(l).errors.excerpt?(a(),i("div",te,n(s(l).errors.excerpt),1)):u("",!0)]),e("div",se,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Category",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s(l).category=o),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[x,s(l).category]]),s(l).errors.category?(a(),i("div",oe,n(s(l).errors.category),1)):u("",!0)]),e("div",re,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s(l).date=o),type:"date",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[x,s(l).date]]),s(l).errors.date?(a(),i("div",le,n(s(l).errors.date),1)):u("",!0)]),e("div",de,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Image (optional)",-1)),e("input",{type:"file",accept:"image/*",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",onChange:t[5]||(t[5]=o=>s(l).image=o.target.files[0])},null,32),s(l).errors.image?(a(),i("div",ae,n(s(l).errors.image),1)):u("",!0)]),e("div",ie,[e("button",{type:"button",onClick:t[6]||(t[6]=o=>c.value=!1),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," Cancel "),e("button",{type:"submit",disabled:s(l).processing,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Create ",8,ne)])],32)])])):u("",!0),g.value?(a(),i("div",ue,[e("div",{class:"fixed inset-0 bg-black/50",onClick:t[7]||(t[7]=o=>g.value=!1)}),e("div",me,[t[28]||(t[28]=e("h3",{class:"text-lg font-medium mb-4"},"Edit News",-1)),e("form",{onSubmit:v(N,["prevent"])},[e("div",xe,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s(r).title=o),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[x,s(r).title]]),s(r).errors.title?(a(),i("div",ce,n(s(r).errors.title),1)):u("",!0)]),e("div",ge,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Excerpt",-1)),m(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=o=>s(r).excerpt=o),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[x,s(r).excerpt]]),s(r).errors.excerpt?(a(),i("div",pe,n(s(r).errors.excerpt),1)):u("",!0)]),e("div",ye,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Category",-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s(r).category=o),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[x,s(r).category]]),s(r).errors.category?(a(),i("div",be,n(s(r).errors.category),1)):u("",!0)]),e("div",fe,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s(r).date=o),type:"date",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[x,s(r).date]]),s(r).errors.date?(a(),i("div",we,n(s(r).errors.date),1)):u("",!0)]),e("div",ve,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Image (optional)",-1)),e("input",{type:"file",accept:"image/*",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",onChange:t[12]||(t[12]=o=>s(r).image=o.target.files[0])},null,32),s(r).errors.image?(a(),i("div",he,n(s(r).errors.image),1)):u("",!0)]),e("div",ke,[e("button",{type:"button",onClick:t[13]||(t[13]=o=>g.value=!1),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," Cancel "),e("button",{type:"submit",disabled:s(r).processing,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Save Changes ",8,_e)])],32)])])):u("",!0)]),_:1}))}};export{Ve as default};
