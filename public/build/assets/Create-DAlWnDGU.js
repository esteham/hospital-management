import{q as x,g as D,k as E,y as N,z as j,w as b,b as t,a as y,u as s,l as k,f as m,i as I,j as p,c as i,d as a,A as g,o as n,t as d,G as M}from"./app-VjPfTDsj.js";import{_ as S}from"./AuthenticatedLayout-DhQkCbPq.js";import{Q as T}from"./vue-quill.snow-CVB8Shpd.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DeNzv_1-.js";const F={class:"flex px-4 py-4 items-center justify-between"},R={class:"flex items-center gap-2"},H={class:"py-8"},O={class:"mx-auto max-w-4xl space-y-6 sm:px-6 lg:px-8"},P={class:"rounded-2xl bg-white p-6 shadow-sm ring-1 ring-gray-100"},Q={key:0,class:"mt-1 text-sm text-red-600"},z={key:0,class:"mt-1 text-sm text-red-600"},A={key:0,class:"mt-1 text-sm text-red-600"},G={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},$={key:0,class:"mt-1 text-sm text-red-600"},J={key:0,class:"mt-1 text-sm text-red-600"},K={class:"flex items-center gap-4"},W={class:"inline-flex cursor-pointer items-center justify-center rounded-xl border border-dashed border-gray-300 px-4 py-2 text-sm hover:bg-gray-50"},X=["src"],Y={key:0,class:"mt-1 text-sm text-red-600"},Z={class:"flex justify-end gap-2 pt-2"},ee=["disabled"],te={key:0,class:"h-4 w-4 animate-spin",viewBox:"0 0 24 24"},re={__name:"Create",setup(se){const u=x(null),h=new Date().toISOString().slice(0,10),r=D({title:"",excerpt:"",content:"",image:null,category:"",date:h}),f=x(null),_=x({modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"]],handlers:{image:q}}}});function C(l){const e=l?.target?.files?.[0];r.image=e||null,f.value=e?URL.createObjectURL(e):null}function q(){const l=document.createElement("input");l.type="file",l.accept="image/*",l.click(),l.onchange=async()=>{const e=l.files?.[0];if(!e)return;const o=new FormData;o.append("image",e);try{const V=(await E.post(route("admin.news.upload-image"),o,{headers:{"Content-Type":"multipart/form-data"}})).data.url,c=u.value?.getQuill?.();if(!c)return;const v=c.getSelection(),B=v?v.index:c.getLength();c.insertEmbed(B,"image",V)}catch(w){console.error("Image upload failed:",w),alert("Image upload failed. Please try again.")}}}function U(){if(u.value?.getHTML&&(r.content=u.value.getHTML()),!r.content||r.content.replace(/<[^>]*>/g,"").trim()===""){r.errors.content="Content is required";return}r.post(route("admin.news.store"),{forceFormData:!0,onSuccess:()=>{M.visit(route("admin.news.index"))},onError:()=>{}})}return N(()=>{document.getElementById("create-title")?.focus()}),(l,e)=>(n(),j(S,{title:"Create News"},{default:b(()=>[t("div",F,[e[6]||(e[6]=t("h2",{class:"font-semibold text-xl text-gray-800"},"Create News",-1)),t("div",R,[y(s(k),{href:l.route("admin.news.index"),class:"inline-flex items-center gap-2 rounded-2xl bg-gray-600 px-4 py-2 text-white shadow hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300"},{default:b(()=>[...e[5]||(e[5]=[m(" Back to News ",-1)])]),_:1},8,["href"])])]),t("div",H,[t("div",O,[t("div",P,[t("form",{onSubmit:I(U,["prevent"]),class:"space-y-4"},[t("div",null,[e[7]||(e[7]=t("label",{for:"create-title",class:"mb-1 block text-sm font-medium text-gray-700"},"Title",-1)),p(t("input",{id:"create-title","onUpdate:modelValue":e[0]||(e[0]=o=>s(r).title=o),type:"text",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[g,s(r).title]]),s(r).errors.title?(n(),i("p",Q,d(s(r).errors.title),1)):a("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Excerpt",-1)),p(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>s(r).excerpt=o),rows:"2",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[g,s(r).excerpt]]),s(r).errors.excerpt?(n(),i("p",z,d(s(r).errors.excerpt),1)):a("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Content",-1)),y(s(T),{ref_key:"editorRef",ref:u,content:s(r).content,"onUpdate:content":e[2]||(e[2]=o=>s(r).content=o),"content-type":"html",options:_.value,class:"quill-field",required:""},null,8,["content","options"]),s(r).errors.content?(n(),i("p",A,d(s(r).errors.content),1)):a("",!0)]),t("div",G,[t("div",null,[e[10]||(e[10]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Category",-1)),p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s(r).category=o),type:"text",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[g,s(r).category]]),s(r).errors.category?(n(),i("p",$,d(s(r).errors.category),1)):a("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Date",-1)),p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s(r).date=o),type:"date",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[g,s(r).date]]),s(r).errors.date?(n(),i("p",J,d(s(r).errors.date),1)):a("",!0)])]),t("div",null,[e[13]||(e[13]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Image (optional)",-1)),t("div",K,[t("label",W,[t("input",{type:"file",accept:"image/*",class:"hidden",onChange:C},null,32),e[12]||(e[12]=m(" Choose file ",-1))]),f.value?(n(),i("img",{key:0,src:f.value,class:"h-12 w-16 rounded-lg object-cover ring-1 ring-gray-200"},null,8,X)):a("",!0)]),s(r).errors.image?(n(),i("p",Y,d(s(r).errors.image),1)):a("",!0)]),t("div",Z,[y(s(k),{href:l.route("admin.news.index"),class:"rounded-xl border border-gray-300 px-4 py-2 text-sm shadow-sm hover:bg-gray-50"},{default:b(()=>[...e[14]||(e[14]=[m(" Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:s(r).processing,class:"inline-flex items-center gap-2 rounded-2xl bg-blue-600 px-4 py-2 text-white shadow hover:bg-blue-700 disabled:opacity-60"},[s(r).processing?(n(),i("svg",te,[...e[15]||(e[15]=[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none",opacity:".25"},null,-1),t("path",{d:"M22 12a10 10 0 00-10-10",stroke:"currentColor","stroke-width":"4",fill:"none","stroke-linecap":"round"},null,-1)])])):a("",!0),e[16]||(e[16]=m(" Create ",-1))],8,ee)])],32)])])])]),_:1}))}},de=L(re,[["__scopeId","data-v-24c8645a"]]);export{de as default};
