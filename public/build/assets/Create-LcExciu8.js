import{g as B,q as w,k as D,y as E,z as N,w as x,b as t,a as f,u as s,l as v,f as u,i as j,j as m,c as a,d as i,A as c,o as n,t as d,G as I}from"./app-TrjTBakK.js";import{_ as S}from"./AuthenticatedLayout-RAZmLjod.js";import{Q as F}from"./vue-quill.snow-xE-6T9wk.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DeNzv_1-.js";const T={class:"flex px-4 py-4 items-center justify-between"},A={class:"flex items-center gap-2"},L={class:"py-8"},O={class:"mx-auto max-w-4xl space-y-6 sm:px-6 lg:px-8"},P={class:"rounded-2xl bg-white p-6 shadow-sm ring-1 ring-gray-100"},Q={key:0,class:"mt-1 text-sm text-red-600"},R={key:0,class:"mt-1 text-sm text-red-600"},z={key:0,class:"mt-1 text-sm text-red-600"},G={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},H={key:0,class:"mt-1 text-sm text-red-600"},$={key:0,class:"mt-1 text-sm text-red-600"},J={class:"flex items-center gap-4"},K={class:"inline-flex cursor-pointer items-center justify-center rounded-xl border border-dashed border-gray-300 px-4 py-2 text-sm hover:bg-gray-50"},W=["src"],X={key:0,class:"mt-1 text-sm text-red-600"},Y={class:"flex justify-end gap-2 pt-2"},Z=["disabled"],ee={key:0,class:"h-4 w-4 animate-spin",viewBox:"0 0 24 24"},te={__name:"Create",setup(se){const k=new Date().toISOString().slice(0,10),r=B({title:"",excerpt:"",content:"",image:null,category:"",date:k}),p=w(null),h=w({modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"]],handlers:{image:C}}}});function _(l){const e=l?.target?.files?.[0];r.image=e||null,p.value=e?URL.createObjectURL(e):null}function C(){const l=document.createElement("input");l.setAttribute("type","file"),l.setAttribute("accept","image/*"),l.click(),l.onchange=async()=>{const e=l.files[0];if(e){const o=new FormData;o.append("image",e);try{const q=(await D.post(route("admin.news.upload-image"),o,{headers:{"Content-Type":"multipart/form-data"}})).data.url,g=this.quill,y=g.getSelection(),U=y?y.index:g.getLength();g.insertEmbed(U,"image",q)}catch(b){console.error("Image upload failed:",b),alert("Image upload failed. Please try again.")}}}}function V(){r.post(route("admin.news.store"),{forceFormData:!0,onSuccess:()=>{I.visit(route("admin.news.index"))},onError:()=>{}})}return E(()=>{document.getElementById("create-title")?.focus()}),(l,e)=>(n(),N(S,{title:"Create News"},{default:x(()=>[t("div",T,[e[6]||(e[6]=t("h2",{class:"font-semibold text-xl text-gray-800"},"Create News",-1)),t("div",A,[f(s(v),{href:l.route("admin.news.index"),class:"inline-flex items-center gap-2 rounded-2xl bg-gray-600 px-4 py-2 text-white shadow hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300"},{default:x(()=>[...e[5]||(e[5]=[u(" Back to News ",-1)])]),_:1},8,["href"])])]),t("div",L,[t("div",O,[t("div",P,[t("form",{onSubmit:j(V,["prevent"]),class:"space-y-4"},[t("div",null,[e[7]||(e[7]=t("label",{for:"create-title",class:"mb-1 block text-sm font-medium text-gray-700"},"Title",-1)),m(t("input",{id:"create-title","onUpdate:modelValue":e[0]||(e[0]=o=>s(r).title=o),type:"text",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[c,s(r).title]]),s(r).errors.title?(n(),a("p",Q,d(s(r).errors.title),1)):i("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Excerpt",-1)),m(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>s(r).excerpt=o),rows:"2",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[c,s(r).excerpt]]),s(r).errors.excerpt?(n(),a("p",R,d(s(r).errors.excerpt),1)):i("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Content",-1)),f(s(F),{modelValue:s(r).content,"onUpdate:modelValue":e[2]||(e[2]=o=>s(r).content=o),options:h.value,class:"quill-field",required:""},null,8,["modelValue","options"]),s(r).errors.content?(n(),a("p",z,d(s(r).errors.content),1)):i("",!0)]),t("div",G,[t("div",null,[e[10]||(e[10]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Category",-1)),m(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s(r).category=o),type:"text",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[c,s(r).category]]),s(r).errors.category?(n(),a("p",H,d(s(r).errors.category),1)):i("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Date",-1)),m(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s(r).date=o),type:"date",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[c,s(r).date]]),s(r).errors.date?(n(),a("p",$,d(s(r).errors.date),1)):i("",!0)])]),t("div",null,[e[13]||(e[13]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Image (optional)",-1)),t("div",J,[t("label",K,[t("input",{type:"file",accept:"image/*",class:"hidden",onChange:_},null,32),e[12]||(e[12]=u(" Choose file ",-1))]),p.value?(n(),a("img",{key:0,src:p.value,class:"h-12 w-16 rounded-lg object-cover ring-1 ring-gray-200"},null,8,W)):i("",!0)]),s(r).errors.image?(n(),a("p",X,d(s(r).errors.image),1)):i("",!0)]),t("div",Y,[f(s(v),{href:l.route("admin.news.index"),class:"rounded-xl border border-gray-300 px-4 py-2 text-sm shadow-sm hover:bg-gray-50"},{default:x(()=>[...e[14]||(e[14]=[u(" Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:s(r).processing,class:"inline-flex items-center gap-2 rounded-2xl bg-blue-600 px-4 py-2 text-white shadow hover:bg-blue-700 disabled:opacity-60"},[s(r).processing?(n(),a("svg",ee,[...e[15]||(e[15]=[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none",opacity:".25"},null,-1),t("path",{d:"M22 12a10 10 0 00-10-10",stroke:"currentColor","stroke-width":"4",fill:"none","stroke-linecap":"round"},null,-1)])])):i("",!0),e[16]||(e[16]=u(" Create ",-1))],8,Z)])],32)])])])]),_:1}))}},ie=M(te,[["__scopeId","data-v-1f6758d9"]]);export{ie as default};
