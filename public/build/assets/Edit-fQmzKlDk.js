import{k as B,r as b,q as D,z as N,H as S,A as I,w as y,d as t,b as w,u as r,l as h,j as m,m as T,e as p,a,f as d,v as g,o as i,t as u,G as M}from"./app-_PHdpLsO.js";import{_ as F}from"./AuthenticatedLayout-CzxogmTj.js";import{Q as L}from"./vue-quill.snow-CiKtyklB.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DeNzv_1-.js";const R={class:"flex px-4 py-4 items-center justify-between"},A={class:"flex items-center gap-2"},H={class:"py-8"},P={class:"mx-auto max-w-4xl space-y-6 sm:px-6 lg:px-8"},Q={class:"rounded-2xl bg-white p-6 shadow-sm ring-1 ring-gray-100"},$={key:0,class:"mt-1 text-sm text-red-600"},z={key:0,class:"mt-1 text-sm text-red-600"},G={key:0,class:"mt-1 text-sm text-red-600"},J={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},K={key:0,class:"mt-1 text-sm text-red-600"},W={key:0,class:"mt-1 text-sm text-red-600"},X={class:"flex items-center gap-4"},Y={class:"inline-flex cursor-pointer items-center justify-center rounded-xl border border-dashed border-gray-300 px-4 py-2 text-sm hover:bg-gray-50"},Z=["src"],ee={key:0,class:"mt-1 text-sm text-red-600"},te={class:"flex justify-end gap-2 pt-2"},se=["disabled"],re={key:0,class:"h-4 w-4 animate-spin",viewBox:"0 0 24 24"},oe={__name:"Edit",props:{news:{type:Object,required:!0}},setup(_){const l=_,s=B({title:l.news.title||"",excerpt:l.news.excerpt||"",content:l.news.content||"",image:null,category:l.news.category||"",date:l.news.date?l.news.date.slice(0,10):new Date().toISOString().slice(0,10)}),f=b(l.news.image?`/storage/${l.news.image}`:null),c=b(null),E=b({modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"]],handlers:{image:q}}}});function C(o){const e=o?.target?.files?.[0];s.image=e||null,f.value=e?URL.createObjectURL(e):null}function q(){const o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.click(),o.onchange=async()=>{const e=o.files[0];if(e){const n=new FormData;n.append("image",e);try{const V=(await D.post(route("admin.news.upload-image"),n,{headers:{"Content-Type":"multipart/form-data"}})).data.url,x=c.value?.getQuill(),k=x?.getSelection(),j=k?k.index:x.getLength();x.insertEmbed(j,"image",V)}catch(v){console.error("Image upload failed:",v),alert("Image upload failed. Please try again.")}}}}function U(){s.transform(o=>({...o,_method:"put"})),s.post(route("admin.news.update",l.news.id),{forceFormData:!0,onSuccess:()=>{M.visit(route("admin.news.index"))},onError:()=>{}})}return N(()=>{document.getElementById("edit-title")?.focus(),S(()=>{c.value&&c.value.setHTML(l.news.content||"")})}),(o,e)=>(i(),I(F,{title:"Edit News"},{default:y(()=>[t("div",R,[e[6]||(e[6]=t("h2",{class:"font-semibold text-xl text-gray-800"},"Edit News",-1)),t("div",A,[w(r(h),{href:o.route("admin.news.index"),class:"inline-flex items-center gap-2 rounded-2xl bg-gray-600 px-4 py-2 text-white shadow hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300"},{default:y(()=>[...e[5]||(e[5]=[m(" Back to News ",-1)])]),_:1},8,["href"])])]),t("div",H,[t("div",P,[t("div",Q,[t("form",{onSubmit:T(U,["prevent"]),class:"space-y-4"},[t("div",null,[e[7]||(e[7]=t("label",{for:"edit-title",class:"mb-1 block text-sm font-medium text-gray-700"},"Title",-1)),p(t("input",{id:"edit-title","onUpdate:modelValue":e[0]||(e[0]=n=>r(s).title=n),type:"text",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[g,r(s).title]]),r(s).errors.title?(i(),a("p",$,u(r(s).errors.title),1)):d("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Excerpt",-1)),p(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=n=>r(s).excerpt=n),rows:"2",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[g,r(s).excerpt]]),r(s).errors.excerpt?(i(),a("p",z,u(r(s).errors.excerpt),1)):d("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Content",-1)),w(r(L),{ref_key:"editorRef",ref:c,content:r(s).content,"onUpdate:content":e[2]||(e[2]=n=>r(s).content=n),"content-type":"html",options:E.value,class:"quill-field",required:""},null,8,["content","options"]),r(s).errors.content?(i(),a("p",G,u(r(s).errors.content),1)):d("",!0)]),t("div",J,[t("div",null,[e[10]||(e[10]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Category",-1)),p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>r(s).category=n),type:"text",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[g,r(s).category]]),r(s).errors.category?(i(),a("p",K,u(r(s).errors.category),1)):d("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Date",-1)),p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>r(s).date=n),type:"date",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[g,r(s).date]]),r(s).errors.date?(i(),a("p",W,u(r(s).errors.date),1)):d("",!0)])]),t("div",null,[e[13]||(e[13]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Image (optional)",-1)),t("div",X,[t("label",Y,[t("input",{type:"file",accept:"image/*",class:"hidden",onChange:C},null,32),e[12]||(e[12]=m(" Choose file ",-1))]),f.value?(i(),a("img",{key:0,src:f.value,class:"h-12 w-16 rounded-lg object-cover ring-1 ring-gray-200"},null,8,Z)):d("",!0)]),r(s).errors.image?(i(),a("p",ee,u(r(s).errors.image),1)):d("",!0)]),t("div",te,[w(r(h),{href:o.route("admin.news.index"),class:"rounded-xl border border-gray-300 px-4 py-2 text-sm shadow-sm hover:bg-gray-50"},{default:y(()=>[...e[14]||(e[14]=[m(" Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:r(s).processing,class:"inline-flex items-center gap-2 rounded-2xl bg-blue-600 px-4 py-2 text-white shadow hover:bg-blue-700 disabled:opacity-60"},[r(s).processing?(i(),a("svg",re,[...e[15]||(e[15]=[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none",opacity:".25"},null,-1),t("path",{d:"M22 12a10 10 0 00-10-10",stroke:"currentColor","stroke-width":"4",fill:"none","stroke-linecap":"round"},null,-1)])])):d("",!0),e[16]||(e[16]=m(" Save Changes ",-1))],8,se)])],32)])])])]),_:1}))}},ue=O(oe,[["__scopeId","data-v-59ee8957"]]);export{ue as default};
