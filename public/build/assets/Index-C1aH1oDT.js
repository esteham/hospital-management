import{r as v,c as _,A as F,w as N,d as e,t as l,e as y,v as z,a as n,o as a,F as k,g as b,p as C,f as x,j as f,i as H}from"./app-BIwNYRrz.js";import{_ as U}from"./AuthenticatedLayout-sIAgyGlZ.js";import"./logo-DeNzv_1-.js";const R={class:"flex p-4 items-center justify-between"},E={class:"flex items-center space-x-3"},I={class:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full"},$={class:"py-4"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-4"},Q={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},G={class:"flex items-center"},J={class:"text-2xl font-bold text-gray-900"},K={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},W={class:"flex items-center"},X={class:"text-2xl font-bold text-gray-900"},Y={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},Z={class:"flex items-center"},ee={class:"text-2xl font-bold text-gray-900"},te={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},se={class:"flex items-center"},oe={class:"text-2xl font-bold text-gray-900"},le={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 mb-4"},ae={class:"flex flex-col lg:flex-row gap-4 items-end"},ne={class:"flex-1 w-full"},re={class:"relative"},ie={class:"w-full lg:w-48"},de=["value"],ce={class:"w-full lg:w-48"},ue=["value"],me={class:"bg-white overflow-hidden rounded-2xl shadow-sm border border-gray-200"},ge={class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray"},xe={class:"bg-white divide-y divide-black"},ve={class:"px-6 py-4"},fe={class:"flex items-start space-x-4"},he={class:"flex-1 min-w-0"},ye={class:"flex items-center space-x-2 mb-1"},ke={class:"text-sm font-semibold text-gray-900 truncate"},be={class:"px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-full"},we={class:"text-sm text-gray-600 mb-1"},_e={class:"px-6 py-4"},Ce={class:"space-y-2"},Be={class:"flex justify-between items-center"},Me={class:"text-sm font-semibold text-gray-900"},je={class:"flex justify-between items-center"},Pe={class:"text-sm font-medium text-gray-700"},Ae={key:0,class:"mt-2"},Te={class:"text-xs text-gray-500"},Le={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Se=["innerHTML"],De={class:"px-6 py-4 whitespace-nowrap"},Fe=["href"],Ne={class:"px-6 py-4 whitespace-nowrap"},ze={class:"flex items-center space-x-3"},He={class:"flex items-center space-x-1"},Ue=["onClick"],Re=["onClick"],Ee=["onClick"],Ie={key:0,class:"text-center py-16"},$e={class:"text-gray-500"},Oe={class:"mt-2 text-sm text-gray-500 max-w-md mx-auto"},qe={class:"text-right mt-4 inline-block text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full"},We={__name:"Index",props:{packageBookings:Array},setup(B){const m=v(B.packageBookings),i=v(""),d=v("all"),c=v("all"),M=[{value:"all",label:"All Status"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"cancelled",label:"Cancelled"}],j=[{value:"all",label:"All Payment Types"},{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"online",label:"Online"}],P={pending:"bg-amber-50 text-amber-700 ring-amber-600/20",confirmed:"bg-emerald-50 text-emerald-700 ring-emerald-600/20",cancelled:"bg-rose-50 text-rose-700 ring-rose-600/20"},A={pending:`
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
    `,confirmed:`
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
    `,cancelled:`
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M6 18L18 6M6 6l12 12"/>
    `},r=_(()=>{let o=m.value;if(i.value){const t=i.value.toLowerCase();o=o.filter(s=>s.user.name.toLowerCase().includes(t)||s.health_check.name.toLowerCase().includes(t)||s.payment_type.toLowerCase().includes(t))}return d.value!=="all"&&(o=o.filter(t=>t.status===d.value)),c.value!=="all"&&(o=o.filter(t=>t.payment_type===c.value)),o}),p=_(()=>{const o=r.value.length,t=r.value.reduce((u,D)=>u+parseFloat(D.amount_paid),0),s=r.value.filter(u=>u.status==="pending").length,g=r.value.filter(u=>u.status==="confirmed").length,S=r.value.filter(u=>u.status==="cancelled").length;return{total:o,totalRevenue:t,pending:s,confirmed:g,cancelled:S}}),T=async o=>{if(confirm("Are you sure you want to delete this package booking? This action cannot be undone."))try{await axios.delete(route("admin.package-bookings.destroy",o)),m.value=m.value.filter(t=>t.id!==o),console.log("Package booking deleted successfully.")}catch(t){console.error("Error:",t),alert("An error occurred while deleting the package booking.")}},L=async o=>{if(confirm("Are you sure you want to confirm this package booking?"))try{await axios.put(route("admin.package-bookings.update",o),{status:"confirmed"});const t=m.value.find(s=>s.id===o);t&&(t.status="confirmed"),console.log("Package booking confirmed successfully.")}catch(t){console.error("Error:",t),alert("An error occurred while confirming the package booking.")}},V=async o=>{const t=prompt("Please enter the reason for cancellation:");if(t!==null&&t.trim()!=="")try{await axios.put(route("admin.package-bookings.update",o),{status:"cancelled",cancellation_reason:t.trim()});const s=m.value.find(g=>g.id===o);s&&(s.status="cancelled",s.cancellation_reason=t.trim()),console.log("Package booking cancelled successfully.")}catch(s){console.error("Error:",s),alert("An error occurred while cancelling the package booking.")}else t===null||alert("Cancellation reason is required.")},w=()=>{i.value="",d.value="all",c.value="all"},h=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o);return(o,t)=>(a(),F(U,{title:"Package Bookings Management"},{default:N(()=>[e("div",R,[t[3]||(t[3]=e("div",null,[e("h2",{class:"font-semibold text-2xl text-gray-900 leading-tight"}," Package Bookings Management "),e("p",{class:"text-gray-600 mt-1 text-sm"}," Manage and monitor all health package bookings across the system ")],-1)),e("div",E,[e("span",I,l(p.value.total)+" bookings ",1)])]),e("div",$,[e("div",O,[e("div",q,[e("div",Q,[e("div",G,[t[5]||(t[5]=e("div",{class:"p-3 bg-blue-50 rounded-xl mr-4"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm font-medium text-gray-600"}," Total Bookings ",-1)),e("p",J,l(p.value.total),1)])])]),e("div",K,[e("div",W,[t[7]||(t[7]=e("div",{class:"p-3 bg-emerald-50 rounded-xl mr-4"},[e("svg",{class:"w-6 h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm font-medium text-gray-600"}," Total Revenue ",-1)),e("p",X,l(h(p.value.totalRevenue)),1)])])]),e("div",Y,[e("div",Z,[t[9]||(t[9]=e("div",{class:"p-3 bg-amber-50 rounded-xl mr-4"},[e("svg",{class:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-600"}," Pending ",-1)),e("p",ee,l(p.value.pending),1)])])]),e("div",te,[e("div",se,[t[11]||(t[11]=e("div",{class:"p-3 bg-rose-50 rounded-xl mr-4"},[e("svg",{class:"w-6 h-6 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-600"}," Cancelled ",-1)),e("p",oe,l(p.value.cancelled),1)])])])]),e("div",le,[e("div",ae,[e("div",ne,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Search Bookings ",-1)),e("div",re,[t[12]||(t[12]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),type:"text",placeholder:"Search by user name, package name, or payment type...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[z,i.value]])])]),e("div",ie,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[(a(),n(k,null,b(M,s=>e("option",{key:s.value,value:s.value},l(s.label),9,de)),64))],512),[[C,d.value]])]),e("div",ce,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Payment Type ",-1)),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>c.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[(a(),n(k,null,b(j,s=>e("option",{key:s.value,value:s.value},l(s.label),9,ue)),64))],512),[[C,c.value]])]),e("button",{onClick:w,class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium whitespace-nowrap"}," Clear Filters ")])]),e("div",me,[e("div",ge,[e("table",pe,[t[23]||(t[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Booking Information "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Payment Details "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Document "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",xe,[(a(!0),n(k,null,b(r.value,s=>(a(),n("tr",{key:s.id,class:"hover:bg-gray-50/50 transition-colors"},[e("td",ve,[e("div",fe,[e("div",he,[e("div",ye,[e("p",ke,l(s.user.name),1),e("span",be,l(s.payment_type),1)]),e("p",we,l(s.health_check.name),1)])])]),e("td",_e,[e("div",Ce,[e("div",Be,[t[16]||(t[16]=e("span",{class:"text-sm text-gray-600"},"Amount Paid:",-1)),e("span",Me,l(h(s.amount_paid)),1)]),e("div",je,[t[17]||(t[17]=e("span",{class:"text-sm text-gray-600"},"Total Amount:",-1)),e("span",Pe,l(h(s.total_amount)),1)]),s.cancellation_reason?(a(),n("div",Ae,[e("p",Te,[t[18]||(t[18]=e("strong",null,"Cancellation Reason:",-1)),f(" "+l(s.cancellation_reason),1)])])):x("",!0)])]),e("td",Le,[e("span",{class:H(["px-3 py-1.5 rounded-full text-sm font-medium ring-1 ring-inset flex items-center space-x-2",P[s.status]])},[(a(),n("svg",Ve,[e("g",{innerHTML:A[s.status]},null,8,Se)])),e("span",null,l(s.status.charAt(0).toUpperCase()+s.status.slice(1)),1)],2)]),e("td",De,[e("a",{href:o.route("admin.package-bookings.download-pdf",s),target:"_blank",class:"inline-flex items-center bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",title:"Download Receipt"},[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),f(" Download ",-1)])],8,Fe)]),e("td",Ne,[e("div",ze,[e("div",He,[s.status==="pending"?(a(),n("button",{key:0,onClick:g=>L(s.id),class:"inline-flex items-center px-3 py-1.5 bg-emerald-50 text-emerald-700 text-sm font-medium rounded-lg hover:bg-emerald-100 transition-colors",title:"Confirm Booking"},[...t[20]||(t[20]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),f(" Confirm ",-1)])],8,Ue)):x("",!0),s.status==="pending"?(a(),n("button",{key:1,onClick:g=>V(s.id),class:"inline-flex items-center px-3 py-1.5 bg-amber-50 text-amber-700 text-sm font-medium rounded-lg hover:bg-amber-100 transition-colors",title:"Cancel Booking"},[...t[21]||(t[21]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),f(" Cancel ",-1)])],8,Re)):x("",!0),e("button",{onClick:g=>T(s.id),class:"inline-flex items-center p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"Delete Booking"},[...t[22]||(t[22]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ee)])])])]))),128))])])]),r.value.length===0?(a(),n("div",Ie,[e("div",$e,[t[24]||(t[24]=e("svg",{class:"mx-auto h-16 w-16 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),t[25]||(t[25]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"}," No package bookings found ",-1)),e("p",Oe,l(i.value||d.value!=="all"||c.value!=="all"?"No bookings match your current filters. Try adjusting your search criteria.":"No package bookings have been made yet."),1),i.value||d.value!=="all"||c.value!=="all"?(a(),n("button",{key:0,onClick:w,class:"mt-4 inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-xl hover:bg-indigo-700 transition-colors"}," Clear all filters ")):x("",!0)])])):x("",!0)]),e("span",qe," Showing "+l(r.value.length)+" of "+l(m.value.length)+" bookings ",1)])])]),_:1}))}};export{We as default};
