import{g as j,q as v,k as B,y as D,z as N,w as f,b as t,a as b,u as r,l as k,f as m,i as S,j as c,c as a,d,A as p,o as i,t as u,G as I}from"./app-TrjTBakK.js";import{_ as F}from"./AuthenticatedLayout-RAZmLjod.js";import{Q as M}from"./vue-quill.snow-xE-6T9wk.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DeNzv_1-.js";const T={class:"flex px-4 py-4 items-center justify-between"},A={class:"flex items-center gap-2"},L={class:"py-8"},P={class:"mx-auto max-w-4xl space-y-6 sm:px-6 lg:px-8"},Q={class:"rounded-2xl bg-white p-6 shadow-sm ring-1 ring-gray-100"},R={key:0,class:"mt-1 text-sm text-red-600"},$={key:0,class:"mt-1 text-sm text-red-600"},z={key:0,class:"mt-1 text-sm text-red-600"},G={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},H={key:0,class:"mt-1 text-sm text-red-600"},J={key:0,class:"mt-1 text-sm text-red-600"},K={class:"flex items-center gap-4"},W={class:"inline-flex cursor-pointer items-center justify-center rounded-xl border border-dashed border-gray-300 px-4 py-2 text-sm hover:bg-gray-50"},X=["src"],Y={key:0,class:"mt-1 text-sm text-red-600"},Z={class:"flex justify-end gap-2 pt-2"},ee=["disabled"],te={key:0,class:"h-4 w-4 animate-spin",viewBox:"0 0 24 24"},se={__name:"Edit",props:{news:{type:Object,required:!0}},setup(h){const n=h,s=j({title:n.news.title||"",excerpt:n.news.excerpt||"",content:n.news.content||"",image:null,category:n.news.category||"",date:n.news.date?n.news.date.slice(0,10):new Date().toISOString().slice(0,10)}),g=v(n.news.image?`/storage/${n.news.image}`:null),_=v({modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"]],handlers:{image:C}}}});function E(o){const e=o?.target?.files?.[0];s.image=e||null,g.value=e?URL.createObjectURL(e):null}function C(){const o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.click(),o.onchange=async()=>{const e=o.files[0];if(e){const l=new FormData;l.append("image",e);try{const q=(await B.post(route("admin.news.upload-image"),l,{headers:{"Content-Type":"multipart/form-data"}})).data.url,x=this.quill,w=x.getSelection(),U=w?w.index:x.getLength();x.insertEmbed(U,"image",q)}catch(y){console.error("Image upload failed:",y),alert("Image upload failed. Please try again.")}}}}function V(){s.transform(o=>({...o,_method:"put"})),s.post(route("admin.news.update",n.news.id),{forceFormData:!0,onSuccess:()=>{I.visit(route("admin.news.index"))},onError:()=>{}})}return D(()=>{document.getElementById("edit-title")?.focus()}),(o,e)=>(i(),N(F,{title:"Edit News"},{default:f(()=>[t("div",T,[e[6]||(e[6]=t("h2",{class:"font-semibold text-xl text-gray-800"},"Edit News",-1)),t("div",A,[b(r(k),{href:o.route("admin.news.index"),class:"inline-flex items-center gap-2 rounded-2xl bg-gray-600 px-4 py-2 text-white shadow hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300"},{default:f(()=>[...e[5]||(e[5]=[m(" Back to News ",-1)])]),_:1},8,["href"])])]),t("div",L,[t("div",P,[t("div",Q,[t("form",{onSubmit:S(V,["prevent"]),class:"space-y-4"},[t("div",null,[e[7]||(e[7]=t("label",{for:"edit-title",class:"mb-1 block text-sm font-medium text-gray-700"},"Title",-1)),c(t("input",{id:"edit-title","onUpdate:modelValue":e[0]||(e[0]=l=>r(s).title=l),type:"text",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[p,r(s).title]]),r(s).errors.title?(i(),a("p",R,u(r(s).errors.title),1)):d("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Excerpt",-1)),c(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>r(s).excerpt=l),rows:"4",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[p,r(s).excerpt]]),r(s).errors.excerpt?(i(),a("p",$,u(r(s).errors.excerpt),1)):d("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Content",-1)),b(r(M),{modelValue:r(s).content,"onUpdate:modelValue":e[2]||(e[2]=l=>r(s).content=l),options:_.value,class:"quill-field",required:""},null,8,["modelValue","options"]),r(s).errors.content?(i(),a("p",z,u(r(s).errors.content),1)):d("",!0)]),t("div",G,[t("div",null,[e[10]||(e[10]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Category",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>r(s).category=l),type:"text",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[p,r(s).category]]),r(s).errors.category?(i(),a("p",H,u(r(s).errors.category),1)):d("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Date",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>r(s).date=l),type:"date",class:"w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[p,r(s).date]]),r(s).errors.date?(i(),a("p",J,u(r(s).errors.date),1)):d("",!0)])]),t("div",null,[e[13]||(e[13]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Image (optional)",-1)),t("div",K,[t("label",W,[t("input",{type:"file",accept:"image/*",class:"hidden",onChange:E},null,32),e[12]||(e[12]=m(" Choose file ",-1))]),g.value?(i(),a("img",{key:0,src:g.value,class:"h-12 w-16 rounded-lg object-cover ring-1 ring-gray-200"},null,8,X)):d("",!0)]),r(s).errors.image?(i(),a("p",Y,u(r(s).errors.image),1)):d("",!0)]),t("div",Z,[b(r(k),{href:o.route("admin.news.index"),class:"rounded-xl border border-gray-300 px-4 py-2 text-sm shadow-sm hover:bg-gray-50"},{default:f(()=>[...e[14]||(e[14]=[m(" Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:r(s).processing,class:"inline-flex items-center gap-2 rounded-2xl bg-blue-600 px-4 py-2 text-white shadow hover:bg-blue-700 disabled:opacity-60"},[r(s).processing?(i(),a("svg",te,[...e[15]||(e[15]=[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none",opacity:".25"},null,-1),t("path",{d:"M22 12a10 10 0 00-10-10",stroke:"currentColor","stroke-width":"4",fill:"none","stroke-linecap":"round"},null,-1)])])):d("",!0),e[16]||(e[16]=m(" Save Changes ",-1))],8,ee)])],32)])])])]),_:1}))}},ae=O(se,[["__scopeId","data-v-7d6a530a"]]);export{ae as default};
