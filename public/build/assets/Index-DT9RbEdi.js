import{q as o,p as k,x as U,g as I,y as R,z as X,w as M,b as e,a as E,f as Y,j as x,A as N,c as n,o as r,F as T,e as S,t as d,v as V,d as $,C as P,n as Z,G as j}from"./app-B8tF6tz5.js";import{_ as ee}from"./AuthenticatedLayout-dWSWfLKK.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DeNzv_1-.js";const se={class:"py-8"},le={class:"mx-auto max-w-7xl space-y-6 sm:px-6 lg:px-8"},oe={class:"rounded-2xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},ae={class:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-6"},re={class:"lg:col-span-2"},ne=["value"],ie={class:"flex gap-2"},de={class:"flex-1"},ue={class:"pt-6"},ce={key:0},ge={key:1},ve={class:"overflow-hidden rounded-2xl bg-white shadow-sm ring-1 ring-gray-100"},xe={class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray-100"},me={class:"divide-y divide-gray-100 bg-white"},fe={class:"px-6 py-3"},ye={key:0,class:"h-12 w-16 overflow-hidden rounded-lg ring-1 ring-gray-200"},be=["src"],we={key:1,class:"flex h-12 w-16 items-center justify-center rounded-lg bg-gray-100 text-[10px] uppercase tracking-wider text-gray-400 ring-1 ring-gray-200"},he={class:"px-6 py-3"},_e={class:"font-medium text-gray-900"},ke={class:"line-clamp-1 text-xs text-gray-500"},Ce={class:"px-6 py-3 text-sm text-gray-700"},De={class:"px-6 py-3 text-sm text-gray-700"},Me={class:"px-6 py-3 text-right"},Ne={class:"inline-flex items-center gap-2"},Te=["onClick"],Se=["onClick"],Ve={key:0},$e={class:"flex items-center justify-between gap-4 border-t border-gray-100 p-4"},je={class:"text-sm text-gray-600"},Ae={class:"flex items-center gap-2"},Be={class:"flex items-center gap-2"},Le=["disabled"],Fe=["disabled"],ze={key:0,class:"fixed inset-0 z-50 grid place-items-center p-4"},Ue={class:"relative z-10 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl"},Ie={class:"mt-6 flex justify-end gap-2"},Ee={class:"pointer-events-none fixed inset-x-0 top-4 z-[60] mx-auto flex w-full max-w-xl flex-col items-center gap-2 px-4"},Pe={class:"text-sm text-gray-800"},We=["onClick"],qe={key:0,class:"fixed inset-0 z-40 grid place-items-center bg-black/20"},He={__name:"Index",props:{news:{type:Array,default:()=>[]}},setup(W){const A=W,p=o(A.news??[]),m=o(""),f=o(""),y=o(""),b=o(""),w=o("date"),c=o("desc"),g=o(10),i=o(1);o(!1),o(!1);const h=o(!1),_=o(null);o(null);const C=o(!1),v=o([]);function B(l,t="success"){const s=Date.now()+Math.random();v.value.push({id:s,message:l,type:t}),setTimeout(()=>{v.value=v.value.filter(a=>a.id!==s)},3500)}const q=l=>!l||typeof l!="string"?null:l.startsWith("http://")||l.startsWith("https://")||l.startsWith("/")?l:`/storage/${l}`,H=l=>{try{return new Date(l).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})}catch{return l}},G=k(()=>{const l=new Set(p.value.map(t=>(t.category||"").trim()).filter(Boolean));return Array.from(l).sort()}),L=k(()=>{let l=[...p.value];if(m.value.trim()){const t=m.value.toLowerCase();l=l.filter(s=>[s.title,s.excerpt,s.content,s.category].map(a=>(a||"").toLowerCase()).some(a=>a.includes(t)))}if(f.value&&(l=l.filter(t=>(t.category||"")===f.value)),y.value){const t=new Date(y.value);l=l.filter(s=>new Date(s.date||s.published_at||0)>=t)}if(b.value){const t=new Date(b.value);t.setHours(23,59,59,999),l=l.filter(s=>new Date(s.date||s.published_at||0)<=t)}return l.sort((t,s)=>{let a,u;return w.value==="date"?(a=new Date(t.date||t.published_at||0).getTime(),u=new Date(s.date||s.published_at||0).getTime()):w.value==="title"?(a=(t.title||"").toLowerCase(),u=(s.title||"").toLowerCase()):(a=(t.category||"").toLowerCase(),u=(s.category||"").toLowerCase()),a<u?c.value==="asc"?-1:1:a>u?c.value==="asc"?1:-1:0}),l}),D=k(()=>Math.max(1,Math.ceil(L.value.length/g.value))),F=k(()=>{const l=(i.value-1)*g.value;return L.value.slice(l,l+g.value)});U([m,f,y,b,w,c,g],()=>{i.value=1});const z=new Date().toISOString().slice(0,10);I({title:"",excerpt:"",content:"",image:null,category:"",date:z}),I({title:"",excerpt:"",content:"",image:null,category:"",date:z}),o(null),o(null);function K(){j.visit(route("admin.news.create"))}function O(l){j.visit(route("admin.news.edit",l.id))}function J(l){_.value=l,h.value=!0}function Q(){if(!_.value)return;const l=_.value;C.value=!0,j.delete(route("admin.news.destroy",l),{preserveScroll:!0,onSuccess:()=>{p.value=p.value.filter(t=>t.id!==l),B("News deleted")},onError:()=>B("Failed to delete","error"),onFinish:()=>{h.value=!1,_.value=null,C.value=!1}})}return R(()=>{U(()=>A.news,l=>{Array.isArray(l)&&(p.value=l)},{immediate:!0})}),(l,t)=>(r(),X(ee,{title:"News"},{default:M(()=>[e("div",{class:"flex px-4 py-4 items-center justify-between"},[t[12]||(t[12]=e("h2",{class:"font-semibold text-xl text-gray-800"},"News Management",-1)),e("div",{class:"flex items-center gap-2"},[e("button",{onClick:K,class:"inline-flex items-center gap-2 rounded-2xl bg-blue-600 px-4 py-2 text-white shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300"},[...t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 5c.552 0 1 .448 1 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H6a1 1 0 110-2h5V6c0-.552.448-1 1-1z"})],-1),Y(" Add News ",-1)])])])]),e("div",se,[e("div",le,[e("div",oe,[e("div",ae,[e("div",re,[t[13]||(t[13]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Search",-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"search",placeholder:"Search title, excerpt, category",class:"w-full rounded-xl border-gray-300 text-sm shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[N,m.value]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Category",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),class:"w-full rounded-xl border-gray-300 text-sm shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t[14]||(t[14]=e("option",{value:""},"All",-1)),(r(!0),n(T,null,S(G.value,s=>(r(),n("option",{key:s,value:s},d(s),9,ne))),128))],512),[[V,f.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"From",-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),type:"date",class:"w-full rounded-xl border-gray-300 text-sm shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[N,y.value]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"To",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>b.value=s),type:"date",class:"w-full rounded-xl border-gray-300 text-sm shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[N,b.value]])]),e("div",ie,[e("div",de,[t[19]||(t[19]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Sort",-1)),x(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>w.value=s),class:"w-full rounded-xl border-gray-300 text-sm shadow-sm focus:border-blue-500 focus:ring-blue-500"},[...t[18]||(t[18]=[e("option",{value:"date"},"Date",-1),e("option",{value:"title"},"Title",-1),e("option",{value:"category"},"Category",-1)])],512),[[V,w.value]])]),e("div",ue,[e("button",{onClick:t[5]||(t[5]=s=>c.value=c.value==="asc"?"desc":"asc"),class:"inline-flex h-[38px] items-center justify-center rounded-xl border border-gray-300 px-3 text-sm shadow-sm hover:bg-gray-50"},[c.value==="asc"?(r(),n("span",ce,"Asc")):(r(),n("span",ge,"Desc"))])])])])]),e("div",ve,[e("div",xe,[e("table",pe,[t[21]||(t[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Image "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Title "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Category "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Date "),e("th",{class:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-gray-600"}," Actions ")])],-1)),e("tbody",me,[(r(!0),n(T,null,S(F.value,s=>(r(),n("tr",{key:s.id,class:"hover:bg-gray-50/50"},[e("td",fe,[s.image?(r(),n("div",ye,[e("img",{src:q(s.image),alt:"news image",class:"h-full w-full object-cover"},null,8,be)])):(r(),n("div",we," No image "))]),e("td",he,[e("div",_e,d(s.title),1),e("div",ke,d(s.excerpt),1)]),e("td",Ce,d(s.category),1),e("td",De,d(H(s.date)),1),e("td",Me,[e("div",Ne,[e("button",{onClick:a=>O(s),class:"rounded-xl border border-gray-300 px-3 py-1.5 text-sm text-gray-700 shadow-sm hover:bg-gray-50"}," Edit ",8,Te),e("button",{onClick:a=>J(s.id),class:"rounded-xl bg-red-50 px-3 py-1.5 text-sm text-red-700 ring-1 ring-inset ring-red-200 hover:bg-red-100"}," Delete ",8,Se)])])]))),128)),F.value.length===0?(r(),n("tr",Ve,[...t[20]||(t[20]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-sm text-gray-500"}," No news found. Try adjusting your filters. ",-1)])])):$("",!0)])])]),e("div",$e,[e("div",je," Page "+d(i.value)+" of "+d(D.value),1),e("div",Ae,[x(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>g.value=s),class:"rounded-lg border-gray-300 text-sm shadow-sm focus:border-blue-500 focus:ring-blue-500"},[...t[22]||(t[22]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1)])],512),[[V,g.value,void 0,{number:!0}]]),e("div",Be,[e("button",{disabled:i.value===1,onClick:t[7]||(t[7]=s=>i.value=Math.max(1,i.value-1)),class:"rounded-lg border border-gray-300 px-3 py-1.5 text-sm shadow-sm enabled:hover:bg-gray-50 disabled:opacity-50"}," Prev ",8,Le),e("button",{disabled:i.value===D.value,onClick:t[8]||(t[8]=s=>i.value=Math.min(D.value,i.value+1)),class:"rounded-lg border border-gray-300 px-3 py-1.5 text-sm shadow-sm enabled:hover:bg-gray-50 disabled:opacity-50"}," Next ",8,Fe)])])])])])]),E(P,{name:"fade"},{default:M(()=>[h.value?(r(),n("div",ze,[e("div",{class:"absolute inset-0 bg-black/40",onClick:t[9]||(t[9]=s=>h.value=!1)}),e("div",Ue,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold"},"Delete this news?",-1)),t[24]||(t[24]=e("p",{class:"mt-1 text-sm text-gray-600"}," This action cannot be undone. ",-1)),e("div",Ie,[e("button",{onClick:t[10]||(t[10]=s=>h.value=!1),class:"rounded-xl border border-gray-300 px-4 py-2 text-sm shadow-sm hover:bg-gray-50"}," Cancel "),e("button",{onClick:Q,class:"rounded-2xl bg-red-600 px-4 py-2 text-white shadow hover:bg-red-700"}," Delete ")])])])):$("",!0)]),_:1}),e("div",Ee,[(r(!0),n(T,null,S(v.value,s=>(r(),n("div",{key:s.id,class:"pointer-events-auto flex w-full items-start gap-3 rounded-2xl bg-white p-3 shadow-lg ring-1 ring-gray-100"},[e("div",{class:Z(["mt-0.5 h-2.5 w-2.5 rounded-full",s.type==="success"?"bg-green-500":"bg-red-500"])},null,2),e("div",Pe,d(s.message),1),e("button",{class:"ml-auto rounded-full p-1 hover:bg-gray-100",onClick:a=>v.value=v.value.filter(u=>u.id!==s.id)},[...t[25]||(t[25]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",class:"h-4 w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,We)]))),128))]),E(P,{name:"fade"},{default:M(()=>[C.value?(r(),n("div",qe,[...t[26]||(t[26]=[e("div",{class:"flex items-center gap-3 rounded-2xl bg-white px-4 py-3 shadow"},[e("svg",{class:"h-5 w-5 animate-spin",viewBox:"0 0 24 24"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none",opacity:".25"}),e("path",{d:"M22 12a10 10 0 00-10-10",stroke:"currentColor","stroke-width":"4",fill:"none","stroke-linecap":"round"})]),e("span",{class:"text-sm"},"Workingâ€¦")],-1)])])):$("",!0)]),_:1})]),_:1}))}},Qe=te(He,[["__scopeId","data-v-6df184f1"]]);export{Qe as default};
