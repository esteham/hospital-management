import{q as p,c as r,a as x,u as w,h as A,w as y,b as e,l as C,f as n,t as l,d as _,o as i,F as h,e as k,i as M,j as c,A as m}from"./app-BoKJi182.js";import{_ as N}from"./AuthenticatedLayout-5_Rn2fbJ.js";import"./logo-DeNzv_1-.js";const j={class:"py-12"},P={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},T={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},U={class:"p-6 lg:p-8 bg-white border-b border-gray-200"},q={class:"flex items-center justify-between"},B={class:"mt-4 space-y-1 text-sm"},F={class:"mt-8"},E={class:"flex items-center justify-between"},O={key:0},L=["href"],R={key:0,class:"mt-4"},z={class:"flex items-center justify-between mb-2"},H={class:"text-sm text-gray-500"},I=["href"],J={class:"whitespace-pre-wrap"},K={key:1,class:"mt-4"},X={class:"mt-8"},G={class:"w-full border border-gray-300"},Q={class:"p-2 border"},W=["onUpdate:modelValue"],Y={class:"p-2 border"},Z=["onUpdate:modelValue"],ee={class:"p-2 border"},te=["onUpdate:modelValue"],oe={class:"p-2 border text-center"},se=["onClick"],le=["disabled"],de={__name:"Show",props:{appointment:Object},setup(D){const o=p(D.appointment),b=p(""),a=p([{name:"",dosage:"",duration:""}]),v=p(""),g=p(!1),V=()=>{a.value.push({name:"",dosage:"",duration:""})},$=d=>{a.value.splice(d,1)},S=async()=>{g.value=!0;try{const d=`
Diagnosis: ${b.value}

${a.value.map((s,f)=>`${f+1}) ${s.name||"—"} — ${s.dosage||"—"} — ${s.duration||"—"}`).join(`
`)}

Advice: ${v.value}
`;(await fetch(`/doctor/appointments/${o.value.id}/prescription`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({prescription_text:d.trim()})})).ok?(alert("Prescription added successfully!"),b.value="",v.value="",a.value=[{name:"",dosage:"",duration:""}],window.location.reload()):alert("Failed to add prescription.")}catch(d){console.error("Error:",d),alert("An error occurred.")}finally{g.value=!1}};return(d,t)=>(i(),r(h,null,[x(w(A),{title:"Appointment Details - Doctor Dashboard"}),x(N,null,{default:y(()=>[e("div",j,[e("div",P,[e("div",T,[e("div",U,[e("div",q,[t[3]||(t[3]=e("h2",{class:"text-2xl font-bold"}," Appointment Details ",-1)),x(w(C),{href:"/doctor/appointments",class:"text-blue-600"},{default:y(()=>[...t[2]||(t[2]=[n(" Back to Appointments ",-1)])]),_:1})]),e("div",B,[e("p",null,[t[4]||(t[4]=e("strong",null,"Booking ID:",-1)),n(" "+l(o.value.booking_id),1)]),e("p",null,[t[5]||(t[5]=e("strong",null,"Name:",-1)),n(" "+l(o.value.first_name)+" "+l(o.value.last_name),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"Email:",-1)),n(" "+l(o.value.email),1)]),e("p",null,[t[7]||(t[7]=e("strong",null,"Phone:",-1)),n(" "+l(o.value.phone),1)]),e("p",null,[t[8]||(t[8]=e("strong",null,"Date:",-1)),n(" "+l(o.value.preferred_date),1)]),e("p",null,[t[9]||(t[9]=e("strong",null,"Time:",-1)),n(" "+l(o.value.preferred_time),1)]),e("p",null,[t[10]||(t[10]=e("strong",null,"Speciality:",-1)),n(" "+l(o.value.speciality),1)]),e("p",null,[t[11]||(t[11]=e("strong",null,"Status:",-1)),n(" "+l(o.value.status),1)])]),e("div",F,[e("div",E,[t[13]||(t[13]=e("h3",{class:"text-xl font-semibold"}," Prescriptions ",-1)),o.value.prescriptions&&o.value.prescriptions.length>0?(i(),r("div",O,[e("a",{href:`/doctor/appointments/${o.value.id}/prescriptions/${o.value.prescriptions[o.value.prescriptions.length-1].id}/download-pdf`,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",target:"_blank"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),n(" Download Latest Prescription ",-1)])],8,L)])):_("",!0)]),o.value.prescriptions&&o.value.prescriptions.length>0?(i(),r("div",R,[(i(!0),r(h,null,k(o.value.prescriptions,s=>(i(),r("div",{key:s.id,class:"border p-4 mb-4 rounded bg-gray-50"},[e("div",z,[e("p",H," Created at: "+l(new Date(s.created_at).toLocaleString()),1),e("a",{href:`/doctor/appointments/${o.value.id}/prescriptions/${s.id}/download-pdf`,class:"inline-flex items-center px-3 py-1 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",target:"_blank"},[...t[14]||(t[14]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),n(" Download ",-1)])],8,I)]),e("pre",J,l(s.prescription_text),1)]))),128))])):(i(),r("div",K,[...t[15]||(t[15]=[e("p",null,"No prescriptions yet.",-1)])])),e("div",X,[t[20]||(t[20]=e("h4",{class:"text-lg font-medium"}," Add New Prescription ",-1)),e("form",{onSubmit:M(S,["prevent"]),class:"mt-4 space-y-4"},[e("div",null,[t[16]||(t[16]=e("label",{class:"block font-semibold mb-1"},"Diagnosis:",-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),type:"text",class:"w-full border rounded p-2",placeholder:"e.g. Fever, Cough",required:""},null,512),[[m,b.value]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block font-semibold mb-1"},"Medicines:",-1)),e("table",G,[t[17]||(t[17]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"p-2 border"}," Medicine Name "),e("th",{class:"p-2 border"}," Dosage "),e("th",{class:"p-2 border"}," Duration "),e("th",{class:"p-2 border"})])],-1)),e("tbody",null,[(i(!0),r(h,null,k(a.value,(s,f)=>(i(),r("tr",{key:f},[e("td",Q,[c(e("input",{"onUpdate:modelValue":u=>s.name=u,type:"text",class:"w-full border p-1 rounded",placeholder:"Medicine name",required:""},null,8,W),[[m,s.name]])]),e("td",Y,[c(e("input",{"onUpdate:modelValue":u=>s.dosage=u,type:"text",class:"w-full border p-1 rounded",placeholder:"e.g. 1 tab thrice daily",required:""},null,8,Z),[[m,s.dosage]])]),e("td",ee,[c(e("input",{"onUpdate:modelValue":u=>s.duration=u,type:"text",class:"w-full border p-1 rounded",placeholder:"e.g. 5 days",required:""},null,8,te),[[m,s.duration]])]),e("td",oe,[a.value.length>1?(i(),r("button",{key:0,type:"button",onClick:u=>$(f),class:"text-red-500 hover:text-red-700"}," ✖ ",8,se)):_("",!0)])]))),128))])]),e("button",{type:"button",onClick:V,class:"mt-2 text-blue-600 hover:underline"}," + Add Medicine ")]),e("div",null,[t[19]||(t[19]=e("label",{class:"block font-semibold mb-1"},"Advice:",-1)),c(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),rows:"3",class:"w-full border rounded p-2",placeholder:"e.g. Drink boiled water, Take rest",required:""},null,512),[[m,v.value]])]),e("button",{type:"submit",disabled:g.value,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed"},l(g.value?"Submitting...":"Add Prescription"),9,le)],32)])])])])])])]),_:1})],64))}};export{de as default};
